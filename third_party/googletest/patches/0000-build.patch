diff --git a/third_party/googletest/BUILD.bazel b/third_party/googletest/BUILD.bazel
index 22a3f31..24dfeb5 100644
--- a/third_party/googletest/BUILD.bazel
+++ b/third_party/googletest/BUILD.bazel
@@ -36,16 +36,6 @@ package(default_visibility = ["//visibility:public"])
 
 licenses(["notice"])
 
-config_setting(
-    name = "windows",
-    constraint_values = ["@bazel_tools//platforms:windows"],
-)
-
-config_setting(
-    name = "has_absl",
-    values = {"define": "absl=1"},
-)
-
 # Library that defines the FRIEND_TEST macro.
 cc_library(
     name = "gtest_prod",
@@ -76,15 +66,12 @@ cc_library(
         "googlemock/include/gmock/*.h",
     ]),
     copts = select({
-        ":windows": [],
+        "//bazel:windows": [],
         "//conditions:default": ["-pthread"],
     }),
-    defines = select({
-        ":has_absl": ["GTEST_HAS_ABSL=1"],
-        "//conditions:default": [],
-    }),
+    defines = ["GTEST_HAS_ABSL=1"],
     features = select({
-        ":windows": ["windows_export_all_symbols"],
+        "//bazel:windows": ["windows_export_all_symbols"],
         "//conditions:default": [],
     }),
     includes = [
@@ -94,28 +81,25 @@ cc_library(
         "googletest/include",
     ],
     linkopts = select({
-        ":windows": [],
+        "//bazel:windows": [],
         "//conditions:default": ["-pthread"],
     }),
-    deps = select({
-        ":has_absl": [
-            "//third_party/absl/debugging:failure_signal_handler",
-            "//third_party/absl/debugging:stacktrace",
-            "//third_party/absl/debugging:symbolize",
-            "//third_party/absl/strings",
-            "//third_party/absl/types:any",
-            "//third_party/absl/types:optional",
-            "//third_party/absl/types:variant",
-        ],
-        "//conditions:default": [],
-    }),
+    deps = [
+        "//third_party/absl/debugging:failure_signal_handler",
+        "//third_party/absl/debugging:stacktrace",
+        "//third_party/absl/debugging:symbolize",
+        "//third_party/absl/strings",
+        "//third_party/absl/types:any",
+        "//third_party/absl/types:optional",
+        "//third_party/absl/types:variant",
+    ],
 )
 
 cc_library(
     name = "gtest_main",
     srcs = ["googlemock/src/gmock_main.cc"],
     features = select({
-        ":windows": ["windows_export_all_symbols"],
+        "//bazel:windows": ["windows_export_all_symbols"],
         "//conditions:default": [],
     }),
     deps = [":gtest"],
@@ -137,7 +121,7 @@ cc_library(
         "googletest/samples/sample4.h",
     ],
     features = select({
-        ":windows": ["windows_export_all_symbols"],
+        "//bazel:windows": ["windows_export_all_symbols"],
         "//conditions:default": [],
     }),
 )
diff --git a/third_party/googletest/googlemock/test/BUILD.bazel b/third_party/googletest/googlemock/test/BUILD.bazel
index a621650..73ca95a 100644
--- a/third_party/googletest/googlemock/test/BUILD.bazel
+++ b/third_party/googletest/googlemock/test/BUILD.bazel
@@ -41,7 +41,7 @@ cc_test(
     size = "small",
     srcs = glob(include = ["gmock-*.cc"]),
     linkopts = select({
-        "//:windows": [],
+        "//bazel:windows": [],
         "//conditions:default": ["-pthread"],
     }),
     deps = ["//third_party/googletest:gtest"],
diff --git a/third_party/googletest/googletest/test/BUILD.bazel b/third_party/googletest/googletest/test/BUILD.bazel
index 4eddc04..4f438b5 100644
--- a/third_party/googletest/googletest/test/BUILD.bazel
+++ b/third_party/googletest/googletest/test/BUILD.bazel
@@ -74,11 +74,11 @@ cc_test(
             "googletest-param-test-invalid-name2-test_.cc",
         ],
     ) + select({
-        "//:windows": [],
+        "//bazel:windows": [],
         "//conditions:default": [],
     }),
     copts = select({
-        "//:windows": ["-DGTEST_USE_OWN_TR1_TUPLE=0"],
+        "//bazel:windows": ["-DGTEST_USE_OWN_TR1_TUPLE=0"],
         "//conditions:default": ["-DGTEST_USE_OWN_TR1_TUPLE=1"],
     }),
     includes = [
@@ -88,7 +88,7 @@ cc_test(
         "googletest/test",
     ],
     linkopts = select({
-        "//:windows": [],
+        "//bazel:windows": [],
         "//conditions:default": ["-pthread"],
     }),
     deps = ["//third_party/googletest:gtest_main"],
@@ -182,10 +182,6 @@ py_test(
     name = "googletest-output-test",
     size = "small",
     srcs = ["googletest-output-test.py"],
-    args = select({
-        "//:has_absl": [],
-        "//conditions:default": ["--no_stacktrace_support"],
-    }),
     data = [
         "googletest-output-test-golden-lin.txt",
         ":googletest-output-test_",
@@ -398,10 +394,6 @@ py_test(
         "gtest_xml_output_unittest.py",
         "gtest_xml_test_utils.py",
     ],
-    args = select({
-        "//:has_absl": [],
-        "//conditions:default": ["--no_stacktrace_support"],
-    }),
     data = [
         # We invoke gtest_no_test_unittest to verify the XML output
         # when the test program contains no test definition.
@@ -506,10 +498,6 @@ py_test(
         "googletest-json-output-unittest.py",
         "gtest_json_test_utils.py",
     ],
-    args = select({
-        "//:has_absl": [],
-        "//conditions:default": ["--no_stacktrace_support"],
-    }),
     data = [
         # We invoke gtest_no_test_unittest to verify the JSON output
         # when the test program contains no test definition.
